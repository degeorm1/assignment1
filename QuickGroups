=begin
Michael De George 
CSC415
=end
require 'csv'

puts "Please enter the name of the input file (include .csv at the end): "
    input = gets.chomp()
puts "Please enter the name of the output file (include .csv at the end): "
    output = gets.chomp()

#opens and reads CSV file
CSV.read(input)
CSV.open(output)

#Reads in the CSV file and enables headers
data = CSV.parse(File.read(input), headers: true)
num_students = data.length

#creating the struct to store objects under proper header
Student = Struct.new(:first_name, :last_name, :email, :major1, :major2, :minor1, :minor2, :section)

#Method to print the columns neatly
def studentInfo (student)
    puts "Full Name:#{student.first_name} #{student.last_name}" 
    puts "Email: #{student.email}"  
    puts "Section: #{student.section}"
    puts "Major(s): #{student.major1}"
    if student.major2 != nil
        puts " and #{student.major2}"
    end
    if student.minor1 != nil
        print "Minor(s): #{student.minor1}"
    end
    if student.minor2 != nil
        puts " and #{student.minor2}"
    end
end

#Fills CSV data into the Student struct
table_array = [Student.new]
i = 0
while i < num_students
    tempStudent = Student.new(data[i]["first_name"], data[i]["last_name"], data[i]["email"], data[i]["major1"], data[i]["major2"], data[i]["minor1"], data[i]["minor2"], data[i]["section"])
    table_array << tempStudent
    i+=1
end

#First question to user
puts "Would you like to sort by number of groups or number of students per gorup? (A for Groups | B for Students"
puts "[A] Number of Groups"
puts "[B] Number of Students per group"
    user_ans_1 = gets.chomp()
    user_ans_1.upcase!
    valid_input = false
    while valid_input == false
        if user_ans_1 == "A"
            puts "How many groups would like?"
            num_groups = gets.chomp.to_i
            num_stud_group = num_students / num_groups
            valid_input = true
        elsif user_ans_1 == "B"
            puts "How many students per group would you like?"
            num_stud_group = gets.chomp.to_i
            num_groups = num_students / num_stud_group
            valid_input = true
        else
            puts "Invalid input. Please enter 'A' or 'B'"
            user_ans_1 = gets.chomp()
            user_ans_1.upcase!
            valid_input = false
        end
    end

    #Test to see if num_groups is correct
    puts num_groups

   #Test to see if table_array is correct
   d = 1
   while d < num_students
       puts studentInfo(table_array[d])
       d+=1
   end








 


